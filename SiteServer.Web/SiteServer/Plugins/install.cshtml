@{ Layout = "../Shared/_Layout.cshtml"; }

<div class="card-box">
  <h4 class="header-title m-t-0">
    插件{{ pageType }}向导
  </h4>
  <p class="text-muted m-b-25 font-13">
    欢迎来到插件{{ pageType }}向导！
  </p>

  <div v-if="listPackages.length > 1 && pageStep > 0" v-for="(listPackage, index) in listPackages" class="alert" v-bind:class="{ 'alert-success': listIndex > index, 'alert-warning': listIndex === index, 'alert-secondary': listIndex < index }">
    {{ listPackage.title }}({{ listPackage.id }})
    {{ listPackage.version }} — 
    <span v-if="listIndex > index">
      {{ pageType }}成功!
    </span>
    <span v-else-if="listIndex < index">
      等待{{ pageType }}!
    </span>
    <span v-else>
      正在{{ pageType }}...
    </span>
  </div>

  <ul v-if="pageStep > 0" class="nav nav-pills nav-fill bg-muted m-b-20">
    <li class="nav-item" v-bind:class="{ active: pageStep == 1 }">
      <a class="nav-link" href="javascript:;">下载{{ pageType }}包</a>
    </li>
    <li class="nav-item" v-bind:class="{ active: pageStep == 2 }">
      <a class="nav-link" href="javascript:;">{{ pageType }}插件</a>
    </li>
  </ul>
  <div v-else class="alert alert-success" role="alert">
    <h4 class="alert-heading">{{ pageType }}完成！</h4>
    <p>
      恭喜，您已经完成了插件的{{ pageType }}，系统将重启并跳转，请稍后...
    </p>
  </div>

  <!-- pageStep 1 place -->
  <template v-if="pageStep === 1">

    <div class="panel panel-border panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">下载{{ pageType }}包</h3>
        <p class="panel-sub-title font-13 text-muted">系统正在下载插件{{ pageType }}包，可能需要几分钟，请稍后...</p>
      </div>
      <div class="panel-body">

        <div class="table-responsive">

          <table class="table tablesaw table-hover m-0">
            <thead>
              <tr class="thead">
                <th class="text-center text-nowrap">状态</th>
                <th class="text-nowrap">Id</th>
                <th class="text-nowrap">名称</th>
                <th class="text-nowrap">版本</th>
                <th>简介</th>
                <th class="text-center text-nowrap">发布时间</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="package in currentPackages">
                <td class="text-center text-nowrap font-13 text-muted">
                  <div class="text-success" v-bind:style="{ display: currentDownloadIds.indexOf(package.id) !== -1 && currentDownloadingId != package.id ? '' : 'none' }">
                    下载完成
                  </div>
                  <div v-bind:style="{ display:currentDownloadingId == package.id ? '' : 'none' }">
                    <img src="../pic/animated_loading.gif" />下载中...
                  </div>
                  <div v-bind:style="{ display: currentDownloadIds.indexOf(package.id) == -1 && currentDownloadingId != package.id ? '' : 'none' }">
                    等待下载
                  </div>
                </td>
                <td class="text-nowrap">
                  {{ package.id }}
                </td>
                <td class="text-nowrap">
                  {{ package.title }}
                </td>
                <td class="text-nowrap">
                  {{ package.version }}
                </td>
                <td>
                  {{ package.description }}
                </td>
                <td class="text-center text-nowrap">
                  {{ package.published }}
                </td>
              </tr>

            </tbody>
          </table>

        </div>
      </div>
    </div>

  </template>

  <!-- pageStep 2 place -->
  <template v-if="pageStep === 2">

    <div class="panel panel-border panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">{{ pageType }}插件</h3>
        <p class="panel-sub-title font-13 text-muted">系统正在{{ pageType }}插件，请稍后...</p>
      </div>
      <div class="panel-body">

        <div class="table-responsive">

          <table class="table tablesaw table-hover m-0">
            <thead>
              <tr class="thead">
                <th class="text-center text-nowrap">状态</th>
                <th class="text-nowrap">Id</th>
                <th class="text-nowrap">名称</th>
                <th class="text-nowrap">版本</th>
                <th>简介</th>
                <th class="text-center text-nowrap">发布时间</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="package in currentPackages">
                <td class="text-center text-nowrap font-13 text-muted">
                  <div class="text-success" v-bind:style="{ display: currentUpdatedIds.indexOf(package.id) !== -1 && currentUpdatingId != package.id ? '' : 'none' }">
                    {{ pageType }}完成
                  </div>
                  <div v-bind:style="{ display:currentUpdatingId == package.id ? '' : 'none' }">
                    <img src="../pic/animated_loading.gif" />{{ pageType }}中...
                  </div>
                  <div v-bind:style="{ display: currentUpdatedIds.indexOf(package.id) == -1 && currentUpdatingId != package.id ? '' : 'none' }">
                    等待{{ pageType }}
                  </div>
                </td>
                <td class="text-nowrap">
                  {{ package.id }}
                </td>
                <td class="text-nowrap">
                  {{ package.title }}
                </td>
                <td class="text-nowrap">
                  {{ package.version }}
                </td>
                <td>
                  {{ package.description }}
                </td>
                <td class="text-center text-nowrap">
                  {{ package.published }}
                </td>
              </tr>

            </tbody>
          </table>

        </div>
      </div>
    </div>

  </template>

</div>

@section Scripts{
<script src="../assets/js/compareversion.js"></script>
<script src="install.js" type="text/javascript"></script> }